//-
  Copyright (C) 2019 Kaleidos Open Source SL

  This file is part of Dont Worry Be Happy (DWBH).
  DWBH is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  DWBH is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with DWBH.  If not, see <https://www.gnu.org/licenses/>.


.header-container
  .header
    .logo(data-testid="logo")
      include ../../assets/img/logo-patio.svg
    .actions(data-testid="actions" v-if="me")
      .user-menu(data-testid="user-menu")
        //- div.user
        //-   span.name(data-testid="user-name") {{ me.name }}
        //-   img.avatar(data-testid="user-avatar" v-bind:src="me.hash|gravatarImage" alt)
        .options-wrapper(
          data-testid="user-actions"
          v-bind:class="{visible: isDropdownVisible}"
        )
          //- .alert-container
          //-   include ../../../assets/img/notification.svg
          //-   span.alert 3
          button.name-actions(v-on:click="toggleDropdown")
            .group-container
              span(v-if="selectedGroup") {{ selectedGroup.name }}
              .dropdown
                include ../../assets/img/chevron.svg
            .avatar-container
              dw-avatar(
                :name="name"
                mood="0"
              )


    .options-menu(
        v-bind:class="{visible: isDropdownVisible}"
    )
      .content
        button.close(v-on:click="toggleDropdown")
          include ../../assets/img/cross.svg
        .avatar-container
          dw-avatar(
            :name="name"
            mood="0"
          )
        .options-text.name {{ name }}
        .options-text.email {{ email }}
        router-link.options-text.profile(v-bind:to="{ name: 'my-profile' }") {{ $t("HEADER.USER_ACTIONS.SEE_PROFILE")}}
        .block
          button.text-and-icon(v-on:click.capture="toggleDropdown")
            include ../../assets/img/settings.svg
            span {{ $t("HEADER.USER_ACTIONS.SETTINGS")}}
        hr
        .block.groups
          h1 {{ $t("HEADER.USER_ACTIONS.GROUPS") }}
          ul
            li(v-for="group in groups")
              a.action(@click="handleChangeSelectedGroup(group.id)") {{ group.name }}
            li
              button.text-and-icon(
                v-on:click="createNewGroup")
                include ../../assets/img/plus.svg
                span {{ $t("HEADER.USER_ACTIONS.CREATE_GROUP")}}
          router-link.action(v-bind:to="{ name: 'groups:list' }") {{ $t("HEADER.ACTIONS.MY_GROUPS")}}
      .actions
        a.logout(
          data-testid="action-logout"
          v-on:click="toggleDropdown(); handleClickLogout();") {{ $t("HEADER.USER_ACTIONS.LOGOUT") }}
